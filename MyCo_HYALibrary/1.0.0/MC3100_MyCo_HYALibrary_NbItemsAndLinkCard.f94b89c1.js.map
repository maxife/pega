{"version":3,"file":"MC3100_MyCo_HYALibrary_NbItemsAndLinkCard.f94b89c1.js","mappings":"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","sources":["webpack://mycustomcomponents/./src/components/MyCo_HYALibrary_NbItemsAndLinkCard/utils.tsx","webpack://mycustomcomponents/./src/components/MyCo_HYALibrary_NbItemsAndLinkCard/index.tsx","webpack://mycustomcomponents/./src/components/shared/create-nonce.ts","webpack://mycustomcomponents/./node_modules/@pega/cosmos-react-core/lib/components/Icon/ lazy ^\\.\\/.*\\/.*\\.icon$ namespace object","webpack://mycustomcomponents/./node_modules/@pega/cosmos-react-core/lib/components/Icon/ lazy ^\\.\\/.*\\/.*\\.icon\\.tsx$ namespace object"],"sourcesContent":["import { type MouseEvent } from 'react';\nimport { Link, DateTimeDisplay } from '@pega/cosmos-react-core';\n\nexport type ObjectProps = {\n  propName: string;\n  type: string;\n  getPConnect: any;\n  item: any;\n};\n\nexport const renderObjectField = ({ propName, type, item, getPConnect }: ObjectProps) => {\n  const value = item[propName];\n  if (!value) return undefined;\n  if (propName === 'pyID' && item.pyID && item.pyLabel && item.pxObjClass && item.pzInsKey) {\n    const linkURL = (window as any).PCore.getSemanticUrlUtils().getResolvedSemanticURL(\n      (window as any).PCore.getSemanticUrlUtils().getActions().ACTION_OPENWORKBYHANDLE,\n      { caseClassName: item.pxObjClass },\n      { workID: item.pyID },\n    );\n    return linkURL ? (\n      <Link\n        href={linkURL}\n        previewable\n        onPreview={() => {\n          getPConnect().getActionsApi().showCasePreview(encodeURI(item.pzInsKey), {\n            caseClassName: item.pxObjClass,\n          });\n        }}\n        onClick={(e: MouseEvent<HTMLButtonElement>) => {\n          /* for links - need to set onClick for spa to avoid full reload - (cmd | ctrl) + click for opening in new tab */\n          if (!e.metaKey && !e.ctrlKey) {\n            e.preventDefault();\n            getPConnect().getActionsApi().openWorkByHandle(item.pzInsKey, item.pxObjClass);\n          }\n        }}\n      >\n        {value}\n      </Link>\n    ) : (\n      value\n    );\n  }\n  if (type === 'date') {\n    return <DateTimeDisplay value={new Date(value)} variant='relative' />;\n  }\n  return value;\n};\n","import { useState, useRef, useEffect, type ReactNode } from 'react';\nimport {\n  withConfiguration,\n  registerIcon,\n  Modal,\n  Flex,\n  useModalManager,\n  SummaryList,\n  MetaList,\n  type SummaryListItem,\n  type ModalMethods,\n  type ModalProps,\n} from '@pega/cosmos-react-core';\nimport * as polarisIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/polaris.icon';\nimport * as informationIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/information.icon';\nimport * as clipboardIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/clipboard.icon';\nimport { renderObjectField } from './utils';\nimport '../shared/create-nonce';\n\ntype UtilityListProps = {\n  heading?: string;\n  iconName: 'information' | 'polaris' | 'clipboard';\n  dataPage: string;\n  setCaseID: boolean;\n  primaryField: string;\n  secondaryFields?: string;\n  secondaryFieldTypes?: string;\n  getPConnect: any;\n};\n\n/* To register more icon, you need to import them as shown above */\nregisterIcon(polarisIcon, informationIcon, clipboardIcon);\n\nconst ViewAllModal = ({\n  heading,\n  objects,\n  loading,\n}: {\n  heading: ModalProps['heading'];\n  objects: SummaryListItem[];\n  loading: ModalProps['progress'];\n}) => {\n  return (\n    <Modal heading={heading} count={objects.length} progress={loading}>\n      <SummaryList items={objects} />\n    </Modal>\n  );\n};\n\nexport const MyCoHyaLibraryNbItemsAndLinkCard = (props: UtilityListProps) => {\n  const {\n    heading = 'List of objects',\n    iconName = 'clipboard',\n    primaryField,\n    secondaryFields = '',\n    secondaryFieldTypes = '',\n    dataPage = '',\n    setCaseID = false,\n    getPConnect,\n  } = props;\n  const { create } = useModalManager();\n  const [objects, setObjects] = useState<Array<SummaryListItem>>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const viewAllModalRef = useRef<ModalMethods<any>>();\n  const caseID = getPConnect().getValue((window as any).PCore.getConstants().CASE_INFO.CASE_INFO_ID);\n\n  const publishUtilityUpdated = (count: any) => {\n    (window as any).PCore.getPubSubUtils().publish('WidgetUpdated', {\n      widget: 'PEGA_EXTENSIONS_UTILITYLIST',\n      count,\n      caseID,\n    });\n  };\n\n  const loadObjects = (data: Array<any>) => {\n    const tmpObjects: Array<SummaryListItem> = [];\n    const secondaryFieldTypesArray = secondaryFieldTypes.split(',');\n    data.forEach((item: any) => {\n      const primary = renderObjectField({\n        propName: primaryField,\n        type: 'string',\n        item,\n        getPConnect,\n      });\n      const secondaryItems: Array<ReactNode> = [];\n      secondaryFields.split(',').forEach((field, index) => {\n        if (item[field]) {\n          const val = renderObjectField({\n            propName: field,\n            type: secondaryFieldTypesArray[index]?.trim().toLocaleLowerCase() || '',\n            item,\n            getPConnect,\n          });\n          if (val) {\n            secondaryItems.push(val);\n          }\n        }\n      });\n      tmpObjects.push({\n        id: item.pyID || item.pyLabel,\n        primary,\n        secondary: <MetaList items={secondaryItems} />,\n      });\n    });\n    setObjects(tmpObjects);\n    publishUtilityUpdated(tmpObjects?.length ?? 0);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    if (dataPage) {\n      const pConn = getPConnect();\n      const CaseInstanceKey = pConn.getValue((window as any).PCore.getConstants().CASE_INFO.CASE_INFO_ID);\n      const payload = {\n        dataViewParameters: [{ CaseInstanceKey }],\n      };\n      (window as any).PCore.getDataApiUtils()\n        .getData(dataPage, setCaseID ? payload : {}, pConn.getContextName())\n        .then((response: any) => {\n          if (response.data.data !== null) {\n            loadObjects(response.data.data);\n          } else {\n            setLoading(false);\n          }\n        })\n        .catch(() => {\n          setLoading(false);\n        });\n    }\n  }, [dataPage, primaryField, secondaryFields, secondaryFieldTypes, getPConnect]);\n\n  if (!primaryField || !dataPage) return null;\n  return (\n    <Flex container={{ direction: 'column' }}>\n      <SummaryList\n        name={heading}\n        headingTag='h3'\n        icon={iconName}\n        count={loading ? undefined : objects.length}\n        items={objects?.slice(0, 3)}\n        loading={loading}\n        onViewAll={() => {\n          viewAllModalRef.current = create(ViewAllModal, { heading, objects, loading });\n        }}\n      />\n    </Flex>\n  );\n};\nexport default withConfiguration(MyCoHyaLibraryNbItemsAndLinkCard);\n","// @ts-ignore\nif (window?.__webpack_nonce__) {\n  // @ts-ignore\n  __webpack_nonce__ = window.__webpack_nonce__;\n}\n","var map = {};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(() => {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar id = map[req];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 2020;\nmodule.exports = webpackAsyncContext;","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 6935;\nmodule.exports = webpackEmptyAsyncContext;"],"names":["renderObjectField","propName","type","item","getPConnect","value","pyID","pyLabel","pxObjClass","pzInsKey","linkURL","window","PCore","getSemanticUrlUtils","getResolvedSemanticURL","getActions","ACTION_OPENWORKBYHANDLE","caseClassName","workID","_jsx","Link","href","previewable","onPreview","getActionsApi","showCasePreview","encodeURI","onClick","e","metaKey","ctrlKey","preventDefault","openWorkByHandle","children","DateTimeDisplay","Date","variant","registerIcon","polarisIcon","informationIcon","clipboardIcon","ViewAllModal","heading","objects","loading","Modal","count","length","progress","SummaryList","items","MyCoHyaLibraryNbItemsAndLinkCard","props","iconName","primaryField","secondaryFields","secondaryFieldTypes","dataPage","setCaseID","create","useModalManager","setObjects","useState","setLoading","viewAllModalRef","useRef","caseID","getValue","getConstants","CASE_INFO","CASE_INFO_ID","useEffect","pConn","payload","dataViewParameters","CaseInstanceKey","getDataApiUtils","getData","getContextName","then","response","data","tmpObjects","secondaryFieldTypesArray","split","forEach","primary","secondaryItems","field","index","val","trim","toLocaleLowerCase","push","id","secondary","MetaList","getPubSubUtils","publish","widget","loadObjects","catch","Flex","container","direction","name","headingTag","icon","undefined","slice","onViewAll","current","withConfiguration","__webpack_nonce__","map","webpackAsyncContext","req","Promise","resolve","__webpack_require__","o","Error","code","keys","Object","module","exports","webpackEmptyAsyncContext"],"sourceRoot":""}